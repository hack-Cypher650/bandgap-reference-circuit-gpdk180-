# Bandgap Reference Architecture

## 1. Overview

This project implements a CMOS bandgap voltage reference based on PTAT–CTAT summation using parasitic vertical PNP BJTs and MOS current mirrors. The architecture is designed to generate a temperature-stable reference voltage (VREF) while maintaining reasonable supply headroom and device matching robustness.

The design follows a current-mode bandgap topology, where PTAT and CTAT components are generated as voltages across resistors and diode-connected BJTs, and combined to cancel first-order temperature dependence.

---

## 2. Design Specifications

| Parameter | Value |
|---------|------|
| Technology | 180 nm CMOS (with parasitic PNP BJTs) |
| Supply Voltage | 3.3 V |
| Target VREF | ~1.1–1.2 V |
| Temperature Range | −40°C to 125°C |
| Architecture Style | Current-mode BGR with MOS mirrors |
| Reference Type | BJT-based bandgap |

---

## 3. Schematic

The complete schematic of the implemented bandgap reference is shown below, highlighting the bias network, PTAT and CTAT branches, and the summation node.

![Top level schematic](Schematics/top_level_schematic_.png)

---

## 4. Top-Level Architecture

The bandgap reference consists of the following major functional blocks:

1. Bias and current mirror network  
2. PTAT generation block  
3. CTAT generation block  
4. PTAT–CTAT summation and VREF generation  

A common bias current is generated and mirrored into the PTAT and CTAT branches to ensure consistent temperature behavior and minimize systematic mismatch.

---

## 5. Biasing and Current Mirror Network

<img width="1315" height="1291" alt="image" src="https://github.com/user-attachments/assets/b66a7b67-f310-44df-98b9-a3dd0d8fd2bb" />


The bias network is implemented using self biased stacked PMOS current mirrors at the top of the circuit and NMOS mirrors at the bottom. These mirrors distribute bias currents to the PTAT and CTAT branches while improving output resistance and reducing sensitivity to supply variations.

Key architectural choices:
- Self Biased Cascode current mirror is employed in the bias network to increase output resistance and reduce current mismatch caused by channel-length modulation. This improves the stability of PTAT and CTAT bias currents across supply and temperature variations, at the expense of additional voltage headroom.
- A single reference branch defines the bias current, which is replicated across the circuit.
- NMOS devices provide controlled sinking of currents in PTAT and CTAT branches.

This biasing strategy ensures that temperature-dependent elements experience matched current conditions.

---

## 6. PTAT Generation Block

<img width="1196" height="693" alt="image" src="https://github.com/user-attachments/assets/4056f874-bf9d-48ef-b28b-df4796009125" />


The PTAT block generates a voltage proportional to absolute temperature using the difference in base-emitter voltages (ΔV_BE) of parasitic PNP BJTs operating at different effective emitter areas.

5 PNP devices are connected in parallel to create an emitter area ratio of 1:5 , producing ΔV_BE that increases linearly with temperature. This ΔV_BE is forced across resistor R1, generating a PTAT current.

Design considerations:
- Emitter area ratio determines the PTAT slope.
- Resistor R1 sets the PTAT current magnitude.
- The PTAT current is mirrored to other branches for summation and biasing.

This block provides the positive temperature coefficient needed to cancel the CTAT component.

---

## 7. CTAT Generation Block

<img width="503" height="603" alt="image" src="https://github.com/user-attachments/assets/b62f67af-0bd8-408d-bcd4-74aaf8856e58" />


The CTAT block is formed using a diode-connected parasitic PNP transistor biased with a constant current. The base-emitter voltage (V_BE) of the PNP exhibits a negative temperature coefficient (approximately −1.6 mV/°C).

This CTAT voltage serves as the base voltage component of the bandgap reference. By biasing the CTAT transistor using the same current mirror network as the PTAT block, systematic temperature and supply variations are minimized.

---

## 8. PTAT–CTAT Summation and VREF Generation

<img width="779" height="1661" alt="image" src="https://github.com/user-attachments/assets/7dd98cff-a393-4685-bb6a-f8373f60b95e" />


The reference voltage is generated by summing the CTAT voltage with a scaled PTAT voltage:

VREF = V_BE + k · ΔV_BE

The PTAT scaling factor is set by resistor ratios derived from first-order bandgap theory. Initial resistor values were obtained analytically, and fine adjustment was later performed to minimize the overall temperature coefficient of VREF under transistor non-idealities.

The summation node is buffered by the mirror network to provide a stable VREF output while isolating the core bandgap from load variations.

---

## 9. Startup Considerations

<img width="808" height="1143" alt="image" src="https://github.com/user-attachments/assets/c5a902f0-41b4-45cc-aacf-970e894c7498" />


The architecture relies on bias currents generated through MOS mirrors; therefore, a defined startup path is required to avoid zero-current equilibrium. The implemented topology ensures that leakage current and mirror imbalance force the circuit into the correct operating state upon power-up.

---

### 10. Layout Considerations

Although this project focuses primarily on schematic-level design,
layout-aware architectural decisions were incorporated:

- Symmetric placement of current mirrors and bias devices to reduce
  systematic mismatch.
- Proximity-based placement of parasitic PNP BJTs and PTAT/CTAT
  resistors to minimize process and thermal gradients.
- Structured power distribution using horizontal VDD and GND rails to
  improve routing clarity and bias consistency.
- Startup circuitry planned to be physically separated from the
  matching-sensitive bandgap core.
- Substrate and well biasing ensured through localized taps; a dedicated
  guard ring was not included due to the isolated, small-signal nature
  of the block.

Post-layout parasitic extraction was not performed, as the layout is
intended to demonstrate physical design intent rather than final
silicon-accurate performance.

---

## 11. Summary

This architecture implements a classical current-mode bandgap reference with explicit attention to biasing symmetry, matching, and temperature compensation. The separation of PTAT and CTAT generation, combined with controlled current mirroring, enables a stable reference voltage representative of bandgap references commonly used in mixed-signal ICs.
